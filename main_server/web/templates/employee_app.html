<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Workspace</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --ai-blue: #4285f4;
            --user-gray: #e9ecef;
            --text-main: #202124;
            --border-color: #eee;
            --logout-red: #ea4335;
        }

        body, html {
            margin: 0; padding: 0; height: 100%; font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-color); color: var(--text-main);
            overflow: hidden;
        }

        /* [1] í™”ë©´ ë ˆì´ì•„ì›ƒ êµ¬ì„± */
        .container {
            display: grid;
            grid-template-columns: 1fr 1.2fr; /* ìš°ì¸¡ ì±„íŒ…ì°½ ë¹„ì¤‘ ì†Œí­ í™•ëŒ€ */
            grid-template-rows: 2fr 1fr;
            height: 100vh;
            gap: 15px;
            padding: 15px;
            box-sizing: border-box;
        }

        .panel {
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--border-color);
            position: relative;
        }

        /* [2] êµ¬ì—­ ë°°ì¹˜ ì„¤ì • */
        .reservation-panel { grid-area: 1 / 1 / 2 / 2; padding: 25px; overflow-y: auto; }
        .combined-control-panel { grid-area: 2 / 1 / 3 / 2; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .chat-panel { grid-area: 1 / 2 / 3 / 3; }

        /* [3] ì»´í¬ë„ŒíŠ¸: ë°©ë¬¸ì˜ˆì•½ í¼ ë° ë¦¬ìŠ¤íŠ¸ */
        .res-form { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .res-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 13px; }
        .full-width { grid-column: span 2; }
        .btn-submit { grid-column: span 2; padding: 12px; background: var(--ai-blue); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* [ì˜ˆì•½ í˜„í™© ë¦¬ìŠ¤íŠ¸ ê¸€ì í¬ê¸° ë° ìŠ¤íƒ€ì¼ ê°•í™”] */
        .res-list-container { 
            flex-grow: 1; 
            border-top: 2px solid #f1f1f1; 
            padding-top: 15px; 
            overflow-y: auto; 
        }
        .res-list-container h4 {
            font-size: 18px; /* ì œëª© í¬ê¸° í™•ëŒ€ */
            margin: 0 0 15px 0;
            color: #333;
        }

        .res-table { 
            width: 100%; 
            border-collapse: collapse; 
            font-size: 14px; /* í‘œ ì „ì²´ ê¸€ì í¬ê¸° í™•ëŒ€ (ê¸°ì¡´ 12px -> 14px) */
            text-align: left; 
        }
        .res-table th { 
            background: #f8f9fa; 
            padding: 12px 10px; 
            border-bottom: 2px solid #eee; 
            font-weight: 700;
            color: #555;
        }
        .res-table td { 
            padding: 14px 10px; /* í–‰ ê°„ê²© í™•ëŒ€ */
            border-bottom: 1px solid #f0f0f0; 
            color: #444;
        }
        .res-table tr:hover { background-color: #fcfcfc; } /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ì‹œê° íš¨ê³¼ */

        /* [4] ì»´í¬ë„ŒíŠ¸: ê³µì¡° ë° ë¡œë´‡ ì œì–´ */
        .control-section-title { font-size: 14px; font-weight: bold; margin-bottom: 8px; color: #555; }
        .remote-grid { display: grid; grid-template-columns: 2fr 1fr 1.5fr; gap: 8px; margin-bottom: 15px; }
        .temp-display { 
            background: #222; color: #0f0; font-family: monospace;
            text-align: center; padding: 10px; border-radius: 8px; font-size: 16px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px;
        }
        .wind-bars { display: flex; gap: 3px; }
        .bar { width: 6px; height: 12px; background: #444; border-radius: 1px; }
        .bar.active { background: #0f0; box-shadow: 0 0 5px #0f0; }
        .remote-btn { padding: 8px; border: none; border-radius: 6px; background: #f1f3f4; cursor: pointer; font-weight: bold; font-size: 12px; }
        .btn-pwr { background: #ea4335; color: white; }
        .robot-btn-group { display: flex; gap: 8px; }
        .ctrl-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: white; font-size: 13px; }
        .btn-call { background: #4285f4; }
        .btn-cancel { background: #5f6368; }
        .btn-receive { background: #34a853; }

        /* [5] ì»´í¬ë„ŒíŠ¸: AI ì±„íŒ… ë° ë¡œê·¸ì•„ì›ƒ */
        .logout-wrapper { position: absolute; top: 15px; right: 20px; z-index: 100; }
        .btn-logout { padding: 8px 15px; background: var(--logout-red); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 13px; }
        .chat-header { padding: 20px; font-weight: 600; border-bottom: 1px solid #f1f1f1; display: flex; align-items: center; gap: 10px; }
        .ai-status { width: 10px; height: 10px; background: #34a853; border-radius: 50%; }
        #chat-messages { flex-grow: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; }
        .message { max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.5; }
        .message.ai { align-self: flex-start; background: #fff; border: 1px solid #eee; border-top-left-radius: 2px; }
        .message.user { align-self: flex-end; background: var(--user-gray); border-top-right-radius: 2px; }
        .chat-input-area { padding: 20px; border-top: 1px solid #f1f1f1; display: flex; gap: 10px; }
        #user-input { flex-grow: 1; border: 1px solid #dfe1e5; border-radius: 25px; padding: 12px 20px; outline: none; }
    </style>
</head>
<body>

    <div class="container">
        <div class="panel reservation-panel">
            <h3 style="margin-top: 0;">ğŸ“… ë°©ë¬¸ ì˜ˆì•½ ë° í˜„í™©</h3>
            <div class="res-form">
                <input type="text" id="res-name" class="res-input" placeholder="ì„±í•¨">
                <input type="text" id="res-purpose" class="res-input" placeholder="ë°©ë¬¸ ëª©ì ">
                <input type="date" id="res-date" class="res-input full-width">
                <input type="text" id="res-phone" class="res-input full-width" placeholder="ì „í™”ë²ˆí˜¸ (010-0000-0000)">
                <button class="btn-submit" onclick="submitReservation()">ë°©ë¬¸ ì˜ˆì•½ ë“±ë¡</button>
            </div>

            <div class="res-list-container">
                <h4 style="margin: 0 0 10px 0;">ğŸ“‹ ë‚´ ì˜ˆì•½ í˜„í™©</h4>
                <table class="res-table">
                    <thead>
                        <tr><th>ì‹ ì²­ì¼</th><th>ì´ë¦„</th><th>ëª©ì </th><th>ë°©ë¬¸ì¼</th><th>ì—°ë½ì²˜</th></tr>
                    </thead>
                    <tbody id="res-table-body">
                        </tbody>
                </table>
            </div>
        </div>

        <div class="panel combined-control-panel">
            <div class="control-section-title">â„ï¸ ê³µì¡° ì‹œìŠ¤í…œ ì œì–´</div>
            <div class="remote-grid">
                <div class="temp-display">
                    <span id="temp-val">24Â°C</span>
                    <div class="wind-bars" id="wind-display">
                        <div class="bar active"></div><div class="bar active"></div><div class="bar"></div><div class="bar"></div>
                    </div>
                </div>
                <button class="remote-btn btn-pwr" onclick="aiSpeak('ê³µì¡° ì‹œìŠ¤í…œ ì „ì›ì„ ì¡°ì‘í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.')">ì „ì›</button>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px;">
                    <button class="remote-btn" onclick="tempChange(1)">ì˜¨ë„ â–²</button>
                    <button class="remote-btn" onclick="tempChange(-1)">ì˜¨ë„ â–¼</button>
                    <button class="remote-btn" onclick="windChange(1)">ë°”ëŒ â–²</button>
                    <button class="remote-btn" onclick="windChange(-1)">ë°”ëŒ â–¼</button>
                </div>
            </div>

            <div class="control-section-title">ğŸ¤– ë¡œë´‡ ì›ê²© ì œì–´</div>
            <div class="robot-btn-group">
                <button class="ctrl-btn btn-call" onclick="robotAction('call')">ë¡œë´‡ í˜¸ì¶œ</button>
                <button class="ctrl-btn btn-cancel" onclick="robotAction('cancel')">í˜¸ì¶œ ì·¨ì†Œ</button>
                <button class="ctrl-btn btn-receive" onclick="robotAction('receive')">ìˆ˜ë ¹ í™•ì¸</button>
            </div>
        </div>

        <div class="panel chat-panel">
            <div class="logout-wrapper">
                <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
            <div class="chat-header">
                <div class="ai-status"></div> AI Assistant
            </div>
            <div id="chat-messages">
                <div class="message ai">ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”? ê¸°ê¸° ì œì–´ë‚˜ ì˜ˆì•½ ë“±ë¡ì„ ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="user-input" placeholder="AI ë¹„ì„œì™€ ëŒ€í™”í•˜ê¸°..." onkeypress="if(event.key==='Enter')sendMessage()">
                <button onclick="sendMessage()" style="border:none; background:none; color:var(--ai-blue); cursor:pointer; font-weight:bold;">ì „ì†¡</button>
            </div>
        </div>
    </div>

<script>
    // [1] ë¡œê·¸ì•„ì›ƒ ê²½ë¡œ ìˆ˜ì •
    function logout() {
        if(confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            location.href = "http://127.0.0.1:8000/web"; 
        }
    }

    // [2] ê³µì¡° ì‹œìŠ¤í…œ ë¡œì§
    let currentTemp = 24;
    let windLevel = 2;
    function tempChange(val) {
        currentTemp += val;
        document.getElementById('temp-val').innerText = `${currentTemp}Â°C`;
        aiSpeak(`ì‹¤ë‚´ ì˜¨ë„ë¥¼ ${currentTemp}ë„ë¡œ ì¡°ì •í•©ë‹ˆë‹¤.`);
    }
    function windChange(val) {
        windLevel = Math.max(0, Math.min(4, windLevel + val));
        const bars = document.getElementById('wind-display').children;
        for(let i=0; i<4; i++) bars[i].className = i < windLevel ? 'bar active' : 'bar';
        aiSpeak(`ë°”ëŒ ì„¸ê¸°ë¥¼ ${windLevel}ë‹¨ê³„ë¡œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.`);
    }

    // [3] ë°©ë¬¸ ì˜ˆì•½ ë“±ë¡ ë° ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ (ì—‘ì…€ ìŠ¤íƒ€ì¼)
    const reservations = [];
    function submitReservation() {
        const name = document.getElementById('res-name').value;
        const purpose = document.getElementById('res-purpose').value;
        const date = document.getElementById('res-date').value;
        const phone = document.getElementById('res-phone').value;
        const today = new Date().toISOString().split('T')[0];

        if(!name || !date) {
            aiSpeak("ë°©ë¬¸ì ì´ë¦„ê³¼ ë‚ ì§œëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.");
            return;
        }

        const newEntry = { today, name, purpose, date, phone };
        reservations.push(newEntry);
        updateReservationTable();
        
        aiSpeak(`${name} ê³ ê°ë‹˜ì˜ ${date} ë°©ë¬¸ ì˜ˆì•½ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ëª©ë¡ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
        
        // ì…ë ¥ì°½ ì´ˆê¸°í™”
        document.querySelectorAll('.res-input').forEach(input => input.value = '');
    }

    function updateReservationTable() {
        const body = document.getElementById('res-table-body');
        // ë°©ë¬¸ê° ì´ë¦„ ë¶€ë¶„ì— í°íŠ¸ êµµê¸°ë¥¼ ì£¼ì–´ ë” ì˜ ë³´ì´ê²Œ ìˆ˜ì •
        body.innerHTML = reservations.map(r => `
            <tr>
                <td style="color: #888;">${r.today}</td>
                <td style="font-size: 15px; font-weight: bold; color: #222;">${r.name}</td>
                <td>${r.purpose}</td>
                <td style="color: #4285f4; font-weight: 600;">${r.date}</td>
                <td>${r.phone}</td>
            </tr>
        `).join('');
    }

    // [4] ë¡œë´‡ ì œì–´ ë° AI í”¼ë“œë°±
    function robotAction(type) {
        let msg = "";
        if(type === 'call') msg = "ì•Œê² ìŠµë‹ˆë‹¤. ë¡œë´‡ì„ í˜„ì¬ ìœ„ì¹˜ë¡œ í˜¸ì¶œí•˜ê² ìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.";
        else if(type === 'cancel') msg = "ë¡œë´‡ í˜¸ì¶œì„ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤. ë¡œë´‡ì´ ëŒ€ê¸° ì¥ì†Œë¡œ ë³µê·€í•©ë‹ˆë‹¤.";
        else msg = "ìˆ˜ë ¹ í™•ì¸ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.";
        aiSpeak(msg);
    }

    // [5] AI Assistant ë°œí™” (LLM ì´ì‹ í¬ì¸íŠ¸)
    function aiSpeak(text) {
        appendMessage('ai', text);
    }

    function sendMessage() {
        const input = document.getElementById('user-input');
        const text = input.value.trim();
        if (!text) return;
        appendMessage('user', text);
        
        // ì—¬ê¸°ì„œ ì‹¤ì œ LLM ì„œë²„ì™€ í†µì‹ í•˜ê²Œ ë©ë‹ˆë‹¤.
        console.log("LLM ì„œë²„ë¡œ ì „ì†¡:", text);
        
        input.value = '';
    }

    function appendMessage(sender, text) {
        const chatMessages = document.getElementById('chat-messages');
        const msgDiv = document.createElement('div');
        msgDiv.className = `message ${sender}`;
        msgDiv.innerText = text;
        chatMessages.appendChild(msgDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
</script>

</body>
</html>