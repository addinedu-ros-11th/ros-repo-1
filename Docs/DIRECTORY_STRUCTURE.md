# Office Robot Service - ν”„λ΅μ νΈ λ””λ ‰ν† λ¦¬ κµ¬μ΅°

μ΄ λ¬Έμ„λ” Office Robot Service ν”„λ΅μ νΈμ νμΌ λ° ν΄λ” κµ¬μ΅°λ¥Ό μ„¤λ…ν•©λ‹λ‹¤. μ΄ ν”„λ΅μ νΈλ” λ¨λ…Έλ ν¬(Monorepo) μ¤νƒ€μΌλ΅ κµ¬μ„±λμ–΄ μμΌλ©°, λ©”μΈ μ„λ²„μ™€ λ΅λ΄‡ κ΄€λ ¨ μ½”λ“λ¥Ό ν¬ν•¨ν•κ³  μμµλ‹λ‹¤.

## π“¦ λ£¨νΈ λ””λ ‰ν† λ¦¬ (`/`)

| ν•­λ© | μ„¤λ… |
| :--- | :--- |
| `main_server/` | **λ©”μΈ μ„λ²„ μ• ν”λ¦¬μΌ€μ΄μ… (FastAPI)**. μ‹μ¤ν…μ μ μ–΄ νƒ€μ› μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤. |
| `robot/` | **λ΅λ΄‡ μ—£μ§€ μ• ν”λ¦¬μΌ€μ΄μ… (ROS 2)**. λ΅λ΄‡ λ‚΄λ¶€μ—μ„ μ‹¤ν–‰λλ” ν¨ν‚¤μ§€λ“¤μ…λ‹λ‹¤. |
| `Docs/` | ν”„λ΅μ νΈ λ¬Έμ„ λ¨μ (μ•„ν‚¤ν…μ², κ°λ° κ°€μ΄λ“ λ“±). |
| `scripts/` | μ ν‹Έλ¦¬ν‹° μ¤ν¬λ¦½νΈ λ° DB μ΄κΈ°ν™” SQL νμΌ. |
| `.env.example` | ν™κ²½ λ³€μ μ„¤μ • μμ‹ νμΌ. |
| `requirements.txt` | λ©”μΈ μ„λ²„ κµ¬λ™μ— ν•„μ”ν• Python ν¨ν‚¤μ§€ λ©λ΅. |
| `README.md` | ν”„λ΅μ νΈ μ†κ° λ° μ‹μ‘ κ°€μ΄λ“. |

---

## π“‚ λ©”μΈ μ„λ²„ κµ¬μ΅° (`main_server/`)

λ©”μΈ μ„λ²„λ” **Layered Architecture**μ™€ **Domain-Driven Design (DDD)** μ›μΉ™μ„ λ”°λ¦…λ‹λ‹¤.

### 1. **`api/` (Presentation Layer)**
API μ—”λ“ν¬μΈνΈ μ •μ λ° μ”μ²­/μ‘λ‹µ μ²λ¦¬.
-   `v1/`: API λ²„μ „ 1.
    -   `admin_routes.py`: κ΄€λ¦¬μμ© API (λ΅λ΄‡ μ μ–΄, μƒνƒ μ΅°ν).
    -   `employee_routes.py`: μ§μ›μ© API (μ‘μ—… μ”μ²­).
    -   `guest_routes.py`: λ°©λ¬Έκ°μ© API (QR μΈμ¦).

### 2. **`core_layer/` (Application Core)**
λΉ„μ¦λ‹μ¤ λ΅μ§ λ° μ μ¤μΌ€μ΄μ¤ κµ¬ν„.
-   `ai_inference/`: AI μ¶”λ΅  κ΄€λ ¨ λ΅μ§.
    -   `grpc_inference_client.py`: AI μ„λ²„μ™€ gRPC ν†µμ‹ μ„ λ‹΄λ‹Ήν•λ” ν΄λΌμ΄μ–ΈνΈ.
-   `fleet_management/`: λ΅λ΄‡ κµ°μ§‘ κ΄€λ¦¬.
    -   `fleet_manager.py`: λ΅λ΄‡ λ°°μ°¨, μƒνƒ κ΄€λ¦¬, νΈλν”½ μ μ–΄ λ΅μ§.
-   `task_management/`: μ‘μ—… μ²λ¦¬ λ΅μ§.
    -   `task_manager.py`: μ‘μ—… μƒμ„±, ν• λ‹Ή, μ¤μΌ€μ¤„λ§.
-   `office_iot/`: μ¤ν”Όμ¤ ν™κ²½ μ μ–΄.
    -   `iot_controller.py`: μ΅°λ…, μ¨μµλ„ λ“± IoT μ¥λΉ„ μ μ–΄.

### 3. **`domains/` (Domain Layer)**
λ„λ©”μΈ μ—”ν‹°ν‹°(λ¨λΈ) λ° λ¦¬ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤ μ •μ.
-   `robots/`: λ΅λ΄‡ λ„λ©”μΈ.
    -   `robot.py`: Robot λ°μ΄ν„° λ¨λΈ (Pydantic).
    -   `robot_repository.py`: Robot λ°μ΄ν„° μ ‘κ·Ό μΈν„°νμ΄μ¤ (Protocol).
-   `tasks/`: μ‘μ—… λ„λ©”μΈ.
    -   `task.py`: Task λ°μ΄ν„° λ¨λΈ.
    -   `task_repository.py`: Task λ°μ΄ν„° μ ‘κ·Ό μΈν„°νμ΄μ¤.

### 4. **`infrastructure/` (Infrastructure Layer)**
μ™Έλ¶€ μ‹μ¤ν…κ³Όμ ν†µμ‹  λ° λ°μ΄ν„° μ €μ¥μ† κµ¬ν„.
-   `communication/`: λ΅λ΄‡ λ° μ™Έλ¶€ ν†µμ‹ .
    -   `ros_bridge.py`: **ROS Bridge**λ¥Ό ν†µν• λ΅λ΄‡κ³Όμ ν†µμ‹  (λ…λ Ή/μƒνƒ) κµ¬ν„.
    -   `protocols.py`: ν†µμ‹  μΈν„°νμ΄μ¤ μ •μ.
-   `database/`: λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ ¨.
    -   `connection.py`: DB μ—°κ²° κ΄€λ¦¬.
    -   `repositories/`: MySQL κΈ°λ° λ¦¬ν¬μ§€ν† λ¦¬ κµ¬ν„μ²΄.
-   `grpc/`: gRPC κ΄€λ ¨ νμΌ.
    -   `ai_inference.proto`: AI μ¶”λ΅  μ„λΉ„μ¤ ν”„λ΅ν† μ½ μ •μ.
    -   `ai_inference_pb2*.py`: Protobuf μ»΄νμΌλ¬μ— μν•΄ μλ™ μƒμ„±λ νμΌλ“¤.

### 5. **`web/` (Web UI)**
μ‚¬μ©μ μΈν„°νμ΄μ¤ (μ›Ή νμ΄μ§€).
-   `templates/`: HTML ν…ν”λ¦Ώ (`admin_dashboard.html`, `employee_app.html`).
-   `static/`: CSS, JS, μ΄λ―Έμ§€ νμΌ.
-   `routes.py`: μ›Ή νμ΄μ§€ λ λ”λ§ λΌμ°ν„°.
-   `connection_manager.py`: WebSocket μ—°κ²° κ΄€λ¦¬μ (μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ).

### 6. **κΈ°νƒ€ μ¤‘μ” νμΌ**
-   `app.py`: **μ• ν”λ¦¬μΌ€μ΄μ… μ§„μ…μ **. FastAPI μ•± μƒμ„± λ° μƒλ…μ£ΌκΈ° κ΄€λ¦¬.
-   `config.py`: ν™κ²½ λ³€μ λ΅λ“ λ° μ „μ—­ μ„¤μ • κ΄€λ¦¬.
-   `container.py`: **μμ΅΄μ„± μ£Όμ…(DI) μ»¨ν…μ΄λ„**. λ¨λ“  μ„λΉ„μ¤ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬.

---

## π“‚ λ΅λ΄‡ κµ¬μ΅° (`robot/`)

λ΅λ΄‡ λ‚΄λ¶€μ—μ„ μ‹¤ν–‰λλ” ROS 2 ν¨ν‚¤μ§€μ…λ‹λ‹¤. (μƒμ„Έ κµ¬ν„μ€ μ¶”ν›„ μ§„ν–‰)

-   `src/`: μ†μ¤ μ½”λ“ λ””λ ‰ν† λ¦¬.
    -   `communication_node/`: μ„λ²„ λ° AI μ„λ²„μ™€μ ν†µμ‹  λ‹΄λ‹Ή λ…Έλ“.
    -   `navigation_node/`: μμ¨ μ£Όν–‰ λ° SLAM λ‹΄λ‹Ή λ…Έλ“.
    -   `perception_node/`: μ„Όμ„ λ°μ΄ν„° μ²λ¦¬ λ° μ¥μ• λ¬Ό κ°μ§€ λ…Έλ“.

---

## π“‚ λ¬Έμ„ (`Docs/`)

-   `COMMUNICATION_ARCHITECTURE.md`: μ‹μ¤ν… ν†µμ‹  κµ¬μ΅° λ° ν”„λ΅ν† μ½ μƒμ„Έ λ…μ„Έ.
-   `DEVELOPMENT_GUIDE.md`: κ°λ° ν™κ²½ μ„¤μ •, μ‹¤ν–‰ λ°©λ²•, API λ…μ„Έ.
-   `PROMPTS_FOR_AI.md`: AI κ°λ° ν΄μ„ μ„ν• μ—­ν• λ³„ ν”„λ΅¬ν”„νΈ λ¨μ.
-   `ROS_Project_Office_robot_service.md`: ν”„λ΅μ νΈ μ „μ²΄ κ°μ” λ° μ‹λ‚λ¦¬μ¤.
-   `DIRECTORY_STRUCTURE.md`: (λ³Έ λ¬Έμ„) ν”„λ΅μ νΈ λ””λ ‰ν† λ¦¬ κµ¬μ΅° μ„¤λ….
